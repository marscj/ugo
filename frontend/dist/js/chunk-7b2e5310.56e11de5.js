(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7b2e5310"],{"901d":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-card",{attrs:{bordered:!1}},[a("a-steps",{staticClass:"steps",attrs:{current:t.currentTab}},[a("a-step",{attrs:{title:"填写订单信息"}}),a("a-step",{attrs:{title:"确认订单信息"}}),a("a-step",{attrs:{title:"完成"}})],1),a("div",{staticClass:"content"},[0===t.currentTab?a("step1",{attrs:{form:t.form,result:t.result},on:{nextStep:t.nextStep}}):t._e(),1===t.currentTab?a("step2",{attrs:{form:t.form,result:t.result},on:{nextStep:t.nextStep,prevStep:t.prevStep}}):t._e(),2===t.currentTab?a("step3",{attrs:{result:t.result},on:{prevStep:t.prevStep,finish:t.finish}}):t._e()],1)],1)},l=[],o=(a("a481"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-form",{staticStyle:{"max-width":"500px",margin:"40px auto 0"},attrs:{form:t.form}},[a("a-form-item",{attrs:{label:"主产品名称",labelCol:t.labelCol,wrapperCol:t.wrapperCol,required:!0}},[a("a-input",{attrs:{disabled:""},model:{value:t.form.product,callback:function(e){t.$set(t.form,"product",e)},expression:"form.product"}})],1),a("a-form-item",{attrs:{label:"子产品名称",labelCol:t.labelCol,wrapperCol:t.wrapperCol,required:!0}},[a("a-input",{attrs:{disabled:""},model:{value:t.form.variant,callback:function(e){t.$set(t.form,"variant",e)},expression:"form.variant"}})],1),a("a-form-item",{attrs:{label:"日期",labelCol:t.labelCol,wrapperCol:t.wrapperCol,required:!0}},[a("a-input",{attrs:{disabled:""},model:{value:t.form.day,callback:function(e){t.$set(t.form,"day",e)},expression:"form.day"}})],1),a("a-form-item",{attrs:{label:"时间",labelCol:t.labelCol,wrapperCol:t.wrapperCol,required:!0}},[a("a-input",{attrs:{disabled:""},model:{value:t.form.time,callback:function(e){t.$set(t.form,"time",e)},expression:"form.time"}})],1),t.form.adult_quantity>0?a("a-form-item",{attrs:{label:"成人数量",labelCol:t.labelCol,wrapperCol:t.wrapperCol,required:!0}},[a("a-input",{attrs:{disabled:""},model:{value:t.form.adult_quantity,callback:function(e){t.$set(t.form,"adult_quantity",e)},expression:"form.adult_quantity"}})],1):t._e(),t.form.adult_quantity>0?a("a-form-item",{attrs:{label:"成人金额",labelCol:t.labelCol,wrapperCol:t.wrapperCol,required:!0}},[a("a-input",{attrs:{suffix:"$",disabled:""},model:{value:t.form.adult_price,callback:function(e){t.$set(t.form,"adult_price",e)},expression:"form.adult_price"}})],1):t._e(),t.form.child_quantity>0?a("a-form-item",{attrs:{label:"儿童数量",labelCol:t.labelCol,wrapperCol:t.wrapperCol,required:!0}},[a("a-input",{attrs:{disabled:""},model:{value:t.form.child_quantity,callback:function(e){t.$set(t.form,"child_quantity",e)},expression:"form.child_quantity"}})],1):t._e(),t.form.child_quantity>0?a("a-form-item",{attrs:{label:"儿童金额",labelCol:t.labelCol,wrapperCol:t.wrapperCol,required:!0}},[a("a-input",{attrs:{suffix:"$",disabled:""},model:{value:t.form.child_price,callback:function(e){t.$set(t.form,"child_price",e)},expression:"form.child_price"}})],1):t._e(),a("a-form-item",{attrs:{label:"优惠金额",labelCol:t.labelCol,wrapperCol:t.wrapperCol,required:!0}},[a("a-spin",{attrs:{spinning:t.spinning}},[a("a-input",{attrs:{suffix:"$",disabled:""},model:{value:t.form.offer,callback:function(e){t.$set(t.form,"offer",e)},expression:"form.offer"}})],1)],1),a("a-form-item",{attrs:{label:"总金额",labelCol:t.labelCol,wrapperCol:t.wrapperCol,required:!0}},[a("a-spin",{attrs:{spinning:t.spinning}},[a("a-input",{attrs:{suffix:"$",disabled:""},model:{value:t.form.total,callback:function(e){t.$set(t.form,"total",e)},expression:"form.total"}})],1)],1),a("a-form-item",{attrs:{label:"优惠券序列号",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-input",{on:{change:t.handleCoupon},model:{value:t.form.couponID,callback:function(e){t.$set(t.form,"couponID",e)},expression:"form.couponID"}})],1),a("a-form-item",{attrs:{label:"UGO关联单号",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-input",{model:{value:t.form.relatedID,callback:function(e){t.$set(t.form,"relatedID",e)},expression:"form.relatedID"}})],1),a("a-form-item",{attrs:{label:"客户关联单号",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-input",{model:{value:t.form.guest_relatedID,callback:function(e){t.$set(t.form,"guest_relatedID",e)},expression:"form.guest_relatedID"}})],1),a("a-form-item",{attrs:{label:"联系人信息",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-textarea",{model:{value:t.form.guest_info,callback:function(e){t.$set(t.form,"guest_info",e)},expression:"form.guest_info"}})],1),a("a-form-item",{attrs:{label:"联系方式",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-textarea",{model:{value:t.form.guest_contact,callback:function(e){t.$set(t.form,"guest_contact",e)},expression:"form.guest_contact"}})],1),a("a-form-item",{attrs:{label:"客户备注",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-textarea",{model:{value:t.form.guest_remark,callback:function(e){t.$set(t.form,"guest_remark",e)},expression:"form.guest_remark"}})],1),a("a-form-item",{attrs:{wrapperCol:{span:19,offset:5}}},[a("a-button",{attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.handleBook(!0)}}},[t._v("下一步")])],1)],1),a("a-divider")],1)}),s=[],n=a("f8b7"),i=a("f3b8"),p=a("b047"),u=a.n(p),c={name:"Step1",props:{form:{type:Object,default:{}},result:{type:Object,default:{}}},data:function(){return this.handleCoupon=u()(this.handleCoupon,1200),{labelCol:{lg:{span:5},sm:{span:5}},wrapperCol:{lg:{span:19},sm:{span:19}},loading:!1,spinning:!1}},methods:{handleBook:function(t){var e=this;this.spinning=!0,Object(n["a"])({day:this.form.day,time:this.form.time,adult_quantity:this.form.adult_quantity,child_quantity:this.form.child_quantity,variantID:this.form.variantID,relatedID:this.form.relatedID,couponID:this.form.couponID}).then(function(a){var r=a.result;Object.assign(e.form,r),t&&e.$emit("nextStep")}).catch(function(t){e.checkError(t),t&&t.response&&t.response.status}).finally(function(){e.spinning=!1})},checkError:function(t){var e=Object(i["a"])(t,"customer","adult_quantity","child_quantity","variant","relatedID","couponID");for(var a in e)e[a]&&this.$notification["error"]({message:e[a],duration:4})},handleCoupon:function(t){this.handleBook(!1)},nextStep:function(){this.$emit("nextStep")}}},f=c,m=a("2877"),d=Object(m["a"])(f,o,s,!1,null,null,null),b=d.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-form",{staticStyle:{"max-width":"500px",margin:"40px auto 0"},attrs:{form:t.form}},[a("a-form-item",{staticClass:"stepFormText",attrs:{label:"主产品名称",labelCol:t.labelCol,wrapperCol:t.wrapperCol,required:!0}},[a("span",{staticClass:"bold"},[t._v(t._s(t.form.product))])]),a("a-form-item",{staticClass:"stepFormText",attrs:{label:"子产品名称",labelCol:t.labelCol,wrapperCol:t.wrapperCol,required:!0}},[a("span",{staticClass:"bold"},[t._v(t._s(t.form.variant))])]),a("a-form-item",{staticClass:"stepFormText",attrs:{label:"日期",labelCol:t.labelCol,wrapperCol:t.wrapperCol,required:!0}},[a("span",{staticClass:"bold"},[t._v(t._s(t.form.day))])]),a("a-form-item",{staticClass:"stepFormText",attrs:{label:"时间",labelCol:t.labelCol,wrapperCol:t.wrapperCol,required:!0}},[a("span",{staticClass:"bold"},[t._v(t._s(t.form.time))])]),t.form.adult_quantity>0?a("a-form-item",{staticClass:"stepFormText",attrs:{label:"成人数量",labelCol:t.labelCol,wrapperCol:t.wrapperCol,required:!0}},[a("span",{staticClass:"bold"},[t._v(t._s(t.form.adult_quantity))])]):t._e(),t.form.adult_quantity>0?a("a-form-item",{staticClass:"stepFormText",attrs:{label:"成人金额",labelCol:t.labelCol,wrapperCol:t.wrapperCol,required:!0}},[a("span",{staticClass:"bold"},[t._v(t._s(t.form.adult_price)+" $")])]):t._e(),t.form.child_quantity>0?a("a-form-item",{staticClass:"stepFormText",attrs:{label:"儿童数量",labelCol:t.labelCol,wrapperCol:t.wrapperCol,required:!0}},[a("span",{staticClass:"bold"},[t._v(t._s(t.form.child_quantity))])]):t._e(),t.form.child_quantity>0?a("a-form-item",{staticClass:"stepFormText",attrs:{label:"儿童金额",labelCol:t.labelCol,wrapperCol:t.wrapperCol,required:!0}},[a("span",{staticClass:"bold"},[t._v(t._s(t.form.child_price)+" $")])]):t._e(),a("a-form-item",{staticClass:"stepFormText",attrs:{label:"优惠金额",labelCol:t.labelCol,wrapperCol:t.wrapperCol,required:!0}},[a("span",{staticClass:"bold"},[t._v(t._s(t.form.offer)+" $")])]),a("a-form-item",{staticClass:"stepFormText",attrs:{label:"总金额",labelCol:t.labelCol,wrapperCol:t.wrapperCol,required:!0}},[a("span",{staticClass:"bold"},[t._v(t._s(t.form.total)+" $")])]),a("a-form-item",{staticClass:"stepFormText",attrs:{label:"UGO关联单号",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("span",{staticClass:"bold"},[t._v(t._s(t.form.relatedID))])]),a("a-form-item",{staticClass:"stepFormText",attrs:{label:"客户关联单号",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("span",{staticClass:"bold"},[t._v(t._s(t.form.guest_relatedID))])]),a("a-form-item",{staticClass:"stepFormText",attrs:{label:"联系人信息",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("span",{staticClass:"bold"},[t._v(t._s(t.form.guest_info))])]),a("a-form-item",{staticClass:"stepFormText",attrs:{label:"联系方式",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("span",{staticClass:"bold"},[t._v(t._s(t.form.guest_contact))])]),a("a-form-item",{staticClass:"stepFormText",attrs:{label:"客户备注",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("span",{staticClass:"bold"},[t._v(t._s(t.form.guest_remark))])]),a("a-form-item",{attrs:{wrapperCol:{span:19,offset:5}}},[a("a-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.nextStep}},[t._v("提交")]),a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:t.prevStep}},[t._v("上一步")])],1)],1)],1)},_=[],h={name:"Step2",props:{form:{type:Object,default:{}},result:{type:Object,default:{}}},data:function(){return{labelCol:{lg:{span:5},sm:{span:5}},wrapperCol:{lg:{span:19},sm:{span:19}},loading:!1,timer:0}},methods:{nextStep:function(){var t=this;this.loading=!0,Object(n["b"])(Object.assign({},this.form)).then(function(e){var a=e.result;t.result.data=a,t.$emit("nextStep")}).catch(function(e){t.checkError(e)}).finally(function(){t.loading=!1})},checkError:function(t){var e=Object(i["a"])(t,"customer","adult_quantity","child_quantity","variant","relatedID");for(var a in e)e[a]&&this.$notification["error"]({message:e[a],duration:4})},prevStep:function(){this.$emit("prevStep")}},beforeDestroy:function(){clearTimeout(this.timer)}},w=h,v=(a("f3c2"),Object(m["a"])(w,C,_,!1,null,"27b2e6a0",null)),x=v.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-spin",{attrs:{spinning:t.loading}},[a("a-form",{staticStyle:{margin:"40px auto 0"}},[a("result",{staticStyle:{"max-width":"560px"},attrs:{title:"操作成功","is-success":!0}},[a("div",{staticClass:"information"},[a("a-form-item",{attrs:{label:"主产品名称",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("span",{staticClass:"bold"},[t._v(t._s(t.result.data.product)+" - "+t._s(t.result.data.variant))])]),a("a-form-item",{attrs:{label:"订单号",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[t._v(t._s(t.result.data.orderID))]),t.result.data.relatedID?a("a-form-item",{attrs:{label:"关联单号",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[t._v(t._s(t.result.data.relatedID))]):t._e(),a("a-form-item",{attrs:{label:"总金额",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[t._v(t._s(t.result.data.total)+" $")]),a("a-form-item",{attrs:{label:"账户余额",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[t._v(t._s(t.userInfo.balance)+" $")])],1),a("div",{attrs:{slot:"action"},slot:"action"},[a("a-button",{attrs:{type:"primary"},on:{click:t.finish}},[t._v("返回首页")]),a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:t.toOrderList}},[t._v("查看订单")])],1)])],1)],1)},y=[],q=a("2af9"),$=(a("7ded"),{name:"Step3",components:{Result:q["d"]},props:{result:{type:Object,default:{}}},mounted:function(){var t=this;this.loading=!0,this.$store.dispatch("GetInfo").then(function(e){var a=e.result;t.userInfo=a}).finally(function(){t.loading=!1})},data:function(){return{labelCol:{lg:{span:5},sm:{span:5}},wrapperCol:{lg:{span:19},sm:{span:19}},userInfo:{},loading:!1}},methods:{finish:function(){this.$emit("finish")},toOrderList:function(){this.$router.push({name:"UserAccount"})}}}),k=$,S=(a("99fb"),Object(m["a"])(k,g,y,!1,null,"63b2d978",null)),I=S.exports,T={components:{Step1:b,Step2:x,Step3:I},data:function(){return{form:this.$route.query,currentTab:0,result:{}}},methods:{nextStep:function(){this.currentTab<2&&(this.currentTab+=1)},prevStep:function(){this.currentTab>0&&(this.currentTab-=1)},finish:function(){this.currentTab=0,this.$router.replace({name:"Home"})}}},D=T,O=Object(m["a"])(D,r,l,!1,null,null,null);e["default"]=O.exports},"99fb":function(t,e,a){"use strict";var r=a("d171"),l=a.n(r);l.a},d171:function(t,e,a){},f3b8:function(t,e,a){"use strict";function r(t){if(t&&t.response&&t.response.data&&t.response.data.message){for(var e={},a=arguments.length,r=new Array(a>1?a-1:0),l=1;l<a;l++)r[l-1]=arguments[l];for(var o=0,s=r;o<s.length;o++){var n=s[o];e[n]=t.response.data.message[n]||null}return e}return null}a.d(e,"a",function(){return r})},f3c2:function(t,e,a){"use strict";var r=a("fdc0"),l=a.n(r);l.a},f8b7:function(t,e,a){"use strict";a.d(e,"a",function(){return o}),a.d(e,"d",function(){return s}),a.d(e,"c",function(){return n}),a.d(e,"e",function(){return i}),a.d(e,"b",function(){return p});var r=a("365c"),l=a("b775");function o(t){return Object(l["b"])({url:r["a"].checkout,method:"post",data:t})}function s(t){return Object(l["b"])({url:r["a"].order,method:"get",params:t})}function n(t){return Object(l["b"])({url:r["a"].order+"".concat(t,"/"),method:"get"})}function i(t,e){return Object(l["b"])({url:r["a"].order+"".concat(t,"/"),method:"put",data:e})}function p(t){return Object(l["b"])({url:r["a"].order,method:"post",data:t})}},fdc0:function(t,e,a){}}]);