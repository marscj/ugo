(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e2be763c"],{"2d04":function(t,a,i){},3848:function(t,a,i){"use strict";i.r(a);var n=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("a-spin",{attrs:{spinning:t.spinning}},[i("a-back-top"),i("div",{staticClass:"detail_main"},[i("div",{staticClass:"detail_main_wrap"},[i("div",{staticClass:"detail_main_left"},[i("div",{staticClass:"detail_gallery"},[i("a-carousel",{attrs:{arrows:"",autoplay:"",dotsClass:"slick-dots slick-thumb"},scopedSlots:t._u([{key:"customPaging",fn:function(a){return i("a",{},[i("img",{attrs:{src:t.getImgUrl(a.i)}})])}}])},t._l(t.data.gallery,function(t){return i("div",{key:t.id},[i("img",{attrs:{src:t.image.gallery_square_crop}})])}),0)],1),i("div",{staticClass:"detail_calendar"},[i("a-calendar",{attrs:{value:t.day,fullscreen:!1,disabledDate:t.disabledDate},on:{change:t.handleDay}})],1)]),i("div",{staticClass:"detail_main_right"},[i("div",{staticClass:"detail_info"},[i("h1",[t._v(t._s(t.data.title))]),i("dl",{staticClass:"detail_dominance"},[i("dt",[t._v("产品特色")]),i("div",{staticClass:"editor-content",domProps:{innerHTML:t._s(t.data.special)}})]),i("div",{staticClass:"detail_address"},[i("span",{staticClass:"detail_txt"},[i("span",{staticClass:"aline"},[t._v("所在地")]),i("span",{staticClass:"detail_dest detail_dest_more",attrs:{id:"detail_dest"}},[t._v("迪拜")])])]),i("div",{staticClass:"detail_address"},[i("span",{staticClass:"detail_txt"},[i("span",{staticClass:"aline"},[t._v("开发商")]),i("span",{staticClass:"detail_dest detail_dest_more",attrs:{id:"detail_dest"}},[t._v("由UgoDubai提供")])])]),i("div",{staticClass:"detail_top_line"})]),i("div",{staticClass:"detail-booking-mod"},[i("div",{staticClass:"detail-booking-info-box"},[i("ul",{staticClass:"detail-booking-info",staticStyle:{margin:"0",padding:"0"}},[i("li",[i("label",[i("span",{},[t._v("选择套餐")])]),i("div",{staticClass:"right"},[i("div",{staticClass:"choose-wrap"},t._l(t.data.variant,function(a){return i("a",{key:a.id,class:t.variant==a?a.status?"focus":null:a.status?null:"disable",attrs:{href:"javascript:;"},on:{click:function(i){return t.handleVariant(a)}}},[t._v("\n                      "+t._s(a.name)+"\n                      "),t.variant==a?i("i"):t._e()])}),0)])]),i("li",{staticStyle:{position:"relative"}},[i("label",[i("span",{},[t._v("选择使用日期时间")])]),i("div",{staticClass:"right"},[i("div",{staticClass:"date-wrapper"},[i("div",{staticClass:"date-box"},[i("a-date-picker",{attrs:{value:t.day,disabledDate:t.disabledDate},on:{change:t.handleDay}}),i("a-time-picker",{staticStyle:{"margin-left":"8px"},attrs:{value:t.time},on:{change:t.handleTime}})],1)])])]),i("li",[i("label",[i("span",{},[t._v("人数")])]),i("div",{staticClass:"right"},[i("div",{staticClass:"instruction-list"},[i("div",{staticClass:"instruction-item"},[i("div",{staticClass:"item-left"},[i("p",{staticStyle:{"margin-bottom":"0px"}},[t._v("\n                          成人\n                          "),t.variant?i("span",{staticClass:"text-grey"},[t._v(t._s(t.variant.adult_desc))]):t._e()]),t.variant?i("p",{staticClass:"price"},[t._v("\n                          单价\n                          "),i("em",[t._v("$"+t._s(t.variant.adult_price))])]):t._e()]),i("div",{staticClass:"item-right"},[i("a-input-number",{attrs:{min:0,max:9999,precision:0,disabled:!t.variant||!t.variant.adult_status},model:{value:t.adult_quantity,callback:function(a){t.adult_quantity=a},expression:"adult_quantity"}})],1)]),i("div",{staticClass:"instruction-item"},[i("div",{staticClass:"item-left"},[i("p",{staticStyle:{"margin-bottom":"0px"}},[t._v("\n                          儿童\n                          "),t.variant?i("span",{staticClass:"text-grey"},[t._v(t._s(t.variant.child_desc))]):t._e()]),t.variant?i("p",{staticClass:"price"},[t._v("\n                          单价\n                          "),i("em",[t._v("$"+t._s(t.variant.child_price))])]):t._e()]),i("div",{staticClass:"item-right"},[i("a-input-number",{attrs:{min:0,max:9999,precision:0,disabled:!t.variant||!t.variant.child_status},model:{value:t.child_quantity,callback:function(a){t.child_quantity=a},expression:"child_quantity"}})],1)])])])])])]),i("div",{staticClass:"booking-mod-bottom"},[i("a-button",{staticClass:"booking-btn",attrs:{type:"primary",disabled:!t.canbook},on:{click:t.handleBook}},[t._v("立即预订")]),i("div",{staticClass:"booking-price-wrap booking-price-wrap-nodesc",staticStyle:{top:"0px"}},[i("p",{staticClass:"selling-price"},[t._v("\n                总价\n                "),i("span",[i("dfn",[t._v("\n                    $\n                    "),i("i",{staticClass:"selling-price-text",staticStyle:{"font-style":"inherit"}},[t._v(t._s(t.total))])])])])])],1)])])]),i("div",{staticClass:"detail_main_wrap",domProps:{innerHTML:t._s(t.data.content)}})])],1)},e=[],s=i("c4c8"),r=i("f8b7"),c=i("f3b8"),l=i("c1df"),d=i.n(l),o={data:function(){return{spinning:!1,data:{gallery:[]},variant:null,day:d()(new Date,"YYYY-MM-DD"),time:d()("12:00:00","HH:mm:ss"),adult_quantity:0,adult_price:0,child_quantity:0,child_price:0,total:0,canbook:!1}},mounted:function(){var t=this.$route.params&&this.$route.params.id;this.fetch(t)},methods:{getImgUrl:function(t){return this.data&&this.data.gallery?this.data.gallery[t].image.gallery_square_crop:""},fetch:function(t){var a=this;this.spinning=!0,Object(s["c"])(t).then(function(t){var i=t.result;a.data=i,a.description=i.subtitle,a.$route.meta.title=i.title,a.$parent.getPageMeta(),a.extraImage=i.photo.image.medium_square_crop}).finally(function(){a.spinning=!1})},handleVariant:function(t){t.status&&(this.variant=t,this.adult_quantity=0,this.child_quantity=0)},handleDay:function(t){this.day=t||d()()},handleTime:function(t){this.time=t||d()("12:00:00","HH:mm:ss")},handleBook:function(){var t=this;this.spinning=!0,Object(r["a"])({day:this.day.format("YYYY-MM-DD"),time:this.time.format("HH:mm:ss"),adult_quantity:this.adult_quantity,child_quantity:this.child_quantity,variantID:this.variant.variantID}).then(function(a){var i=a.result;t.$router.push({name:"Checkout",query:i})}).catch(function(a){t.checkError(a),a&&a.response&&a.response.status}).finally(function(){t.spinning=!1})},checkError:function(t){var a=Object(c["a"])(t,"customer","adult_quantity","child_quantity","adult_price","child_price","variant");for(var i in a)a[i]&&this.$notification["error"]({message:a[i],duration:4})},handleCanBook:function(){(this.adult_quantity>0||this.child_quantity>0)&&this.day&&this.time?this.canbook=!0:this.canbook=!1},toDecimal:function(t){var a=parseFloat(t);if(!isNaN(a))return Math.round(100*t)/100},disabledDate:function(t){return t.diff(d()(new Date).format("YYYY-MM-DD"))<=0}},watch:{adult_quantity:function(t){this.adult_price=this.toDecimal(this.variant.adult_price*t),this.handleCanBook()},child_quantity:function(t){this.child_price=this.toDecimal(this.variant.child_price*t),this.handleCanBook()},adult_price:function(t){this.total=this.toDecimal(t+this.child_price)},child_price:function(t){this.total=this.toDecimal(this.adult_price+t)},day:function(t){this.handleCanBook()},time:function(t){this.handleCanBook()}}},u=o,h=(i("401f"),i("2877")),p=Object(h["a"])(u,n,e,!1,null,"228b48db",null);a["default"]=p.exports},"401f":function(t,a,i){"use strict";var n=i("2d04"),e=i.n(n);e.a},c4c8:function(t,a,i){"use strict";i.d(a,"d",function(){return s}),i.d(a,"c",function(){return r}),i.d(a,"g",function(){return c}),i.d(a,"a",function(){return l}),i.d(a,"b",function(){return d}),i.d(a,"e",function(){return o}),i.d(a,"f",function(){return u});var n=i("365c"),e=i("b775");function s(t){return Object(e["b"])({url:n["a"].product,method:"get",params:t})}function r(t){return Object(e["b"])({url:n["a"].product+"".concat(t,"/"),method:"get"})}function c(t,a){return Object(e["b"])({url:n["a"].product+"".concat(t,"/"),method:"put",data:a})}function l(t){return Object(e["b"])({url:n["a"].product,method:"post",data:t})}function d(t){return Object(e["b"])({url:n["a"].product+"".concat(t,"/"),method:"delete"})}function o(t){return Object(e["b"])({url:n["a"].product+"delete/",method:"delete",params:t})}function u(t){return Object(e["b"])({url:n["a"].product+"enable/",method:"post",params:t})}},f3b8:function(t,a,i){"use strict";function n(t){if(t&&t.response&&t.response.data&&t.response.data.message){for(var a={},i=arguments.length,n=new Array(i>1?i-1:0),e=1;e<i;e++)n[e-1]=arguments[e];for(var s=0,r=n;s<r.length;s++){var c=r[s];a[c]=t.response.data.message[c]||null}return a}return null}i.d(a,"a",function(){return n})},f8b7:function(t,a,i){"use strict";i.d(a,"a",function(){return s}),i.d(a,"d",function(){return r}),i.d(a,"c",function(){return c}),i.d(a,"e",function(){return l}),i.d(a,"b",function(){return d});var n=i("365c"),e=i("b775");function s(t){return Object(e["b"])({url:n["a"].checkout,method:"post",data:t})}function r(t){return Object(e["b"])({url:n["a"].order,method:"get",params:t})}function c(t){return Object(e["b"])({url:n["a"].order+"".concat(t,"/"),method:"get"})}function l(t,a){return Object(e["b"])({url:n["a"].order+"".concat(t,"/"),method:"put",data:a})}function d(t){return Object(e["b"])({url:n["a"].order,method:"post",data:t})}}}]);