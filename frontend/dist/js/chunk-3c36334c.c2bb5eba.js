(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3c36334c"],{"0fea":function(e,t,a){"use strict";a.d(t,"e",function(){return n}),a.d(t,"g",function(){return s}),a.d(t,"c",function(){return i}),a.d(t,"a",function(){return o}),a.d(t,"d",function(){return d}),a.d(t,"b",function(){return c}),a.d(t,"f",function(){return u});var l=a("365c"),r=a("b775");function n(e){return Object(r["b"])({url:l["a"].user,method:"get",params:e})}function s(e,t){return Object(r["b"])({url:l["a"].user+"".concat(e,"/"),method:"put",data:t})}function i(e){return Object(r["b"])({url:l["a"].user,method:"post",data:e})}function o(e,t){return Object(r["b"])({url:l["a"].user+"".concat(e,"/")+"admin_change_password/",method:"post",data:t})}function d(e){return Object(r["b"])({url:l["a"].role,method:"get",params:e})}function c(e){return Object(r["b"])({url:l["a"].role,method:"post",data:e})}function u(e,t){return Object(r["b"])({url:l["a"].role+"".concat(e,"/"),method:"put",data:t})}},bf4c:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{directives:[{name:"action",rawName:"v-action:query",arg:"query"}],attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"角色ID"}},[a("a-input",{attrs:{placeholder:"请输入"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons"},[a("a-button",{attrs:{type:"primary"}},[e._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px"}},[e._v("重置")])],1)])],1)],1)],1),a("div",{staticClass:"table-operator"},[a("a-button",{directives:[{name:"action",rawName:"v-action:add",arg:"add"}],attrs:{type:"primary",icon:"plus"},on:{click:e.handleCreate}},[e._v("Add")])],1),a("s-table",{attrs:{"row-key":"id",size:"default",columns:e.columns,data:e.loadData,bordered:""},scopedSlots:e._u([{key:"active",fn:function(e){return a("span",{},[a("a-checkbox",{attrs:{checked:e,disabled:""}})],1)}},{key:"staff",fn:function(e){return a("span",{},[a("a-checkbox",{attrs:{checked:e,disabled:""}})],1)}},{key:"action",fn:function(t,l){return a("span",{},[a("a",{directives:[{name:"action",rawName:"v-action:edit",arg:"edit"}],on:{click:function(t){return e.handleEdit(l)}}},[e._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{directives:[{name:"action",rawName:"v-action:edit",arg:"edit"}],on:{click:function(t){return e.handleChangePassword(l)}}},[e._v("修改密码")])],1)}}])}),a("a-modal",{staticStyle:{top:"20px"},attrs:{title:e.isEdit?"Edit":"Create",width:"90%"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:function(t){e.visible=!1}}},[e._v("Return")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:e.loading},on:{click:function(t){e.isEdit?e.updateForm():e.createForm()}}},[e._v("Submit")])],1),a("a-form",{attrs:{form:e.mdl}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"UserID",validateStatus:"success"}},[a("a-input",{attrs:{disabled:""},model:{value:e.mdl.id,callback:function(t){e.$set(e.mdl,"id",t)},expression:"mdl.id"}})],1),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"Username",required:!0,"validate-status":null==e.help.username||""===e.help.username?null:"error",help:e.help.username}},[a("a-input",{attrs:{disabled:e.isEdit},model:{value:e.mdl.username,callback:function(t){e.$set(e.mdl,"username",t)},expression:"mdl.username"}})],1),e.isEdit?e._e():a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"Password",required:!0,"validate-status":null==e.help.password||""===e.help.password?null:"error",help:e.help.password}},[a("a-input",{attrs:{size:"large",type:"password",autocomplete:"false"},model:{value:e.mdl.password,callback:function(t){e.$set(e.mdl,"password",t)},expression:"mdl.password"}},[a("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"Price Level",required:!0,"validate-status":null==e.help.price_level||""===e.help.price_level?null:"error",help:e.help.price_level}},[a("a-select",{model:{value:e.mdl.price_level,callback:function(t){e.$set(e.mdl,"price_level",t)},expression:"mdl.price_level"}},[a("a-select-option",{key:"0",attrs:{value:1}},[e._v("Level 1")]),a("a-select-option",{key:"1",attrs:{value:2}},[e._v("Level 2")]),a("a-select-option",{key:"2",attrs:{value:3}},[e._v("Level 3")]),a("a-select-option",{key:"3",attrs:{value:4}},[e._v("Level 4")]),a("a-select-option",{key:"4",attrs:{value:5}},[e._v("Level 5")])],1)],1),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"Balance",required:!0,"validate-status":null==e.help.balance||""===e.help.balance?null:"error",help:e.help.balance}},[a("a-input-number",{staticStyle:{width:"200px"},attrs:{min:0,defaultValue:0,precision:2,step:.5},model:{value:e.mdl.balance,callback:function(t){e.$set(e.mdl,"balance",t)},expression:"mdl.balance"}})],1),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"Role","validate-status":null==e.help.role_id||""===e.help.role_id?null:"error",help:e.help.role_id}},[a("a-select",{staticStyle:{width:"200px"},attrs:{value:e.mdl.role_id,defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,allowClear:"",notFoundContent:"Not Found."},on:{change:e.handleRoleChange}},e._l(e.roleOption,function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])}),1)],1),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"Status",required:!0,"validate-status":null==e.help.is_active||""===e.help.is_active?null:"error",help:e.help.is_active}},[a("a-switch",{attrs:{checkedChildren:"Enable",unCheckedChildren:"Disable(禁用登陆)"},model:{value:e.mdl.is_active,callback:function(t){e.$set(e.mdl,"is_active",t)},expression:"mdl.is_active"}})],1),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"Staff",required:!0,"validate-status":null==e.help.is_staff||""===e.help.is_staff?null:"error",help:e.help.is_staff}},[a("a-switch",{attrs:{checkedChildren:"Enable",unCheckedChildren:"Disable"},model:{value:e.mdl.is_staff,callback:function(t){e.$set(e.mdl,"is_staff",t)},expression:"mdl.is_staff"}})],1)],1)],2),a("a-modal",{attrs:{title:"修改密码",width:"600px"},model:{value:e.visible_password,callback:function(t){e.visible_password=t},expression:"visible_password"}},[a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:function(t){e.visible_password=!1}}},[e._v("Return")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:e.loading},on:{click:e.changePassword}},[e._v("Submit")])],1),a("a-form",{attrs:{form:e.mdl}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"New Password",required:!0,"validate-status":null==e.help.new_password||""===e.help.new_password?null:"error",help:e.help.new_password}},[a("a-input",{attrs:{size:"large",type:"password",autocomplete:"false"},model:{value:e.mdl.new_password,callback:function(t){e.$set(e.mdl,"new_password",t)},expression:"mdl.new_password"}},[a("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1)],1)],2)],1)},r=[],n=a("2af9"),s=a("0fea"),i=a("f3b8"),o={name:"UserList",components:{STable:n["e"]},data:function(){var e=this.$createElement;return{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},mdl:{role:{},role_id:0},queryParam:{},columns:[{title:"ID",dataIndex:"id",width:"100px"},{title:"Username",dataIndex:"username"},{title:"Role",dataIndex:"role.name"},{title:"Status",dataIndex:"is_active",scopedSlots:{customRender:"active"}},{title:"Staff",dataIndex:"is_staff",scopedSlots:{customRender:"staff"}},{title:"Balance",dataIndex:"balance"},{title:"Price Levle",dataIndex:"price_level",width:"120px",customRender:function(t,a,l){return e("span",["Level ",t])}},{title:"操作",width:"150px",dataIndex:"action",scopedSlots:{customRender:"action"}}],loadData:function(e){return Object(s["e"])(e).then(function(e){return e.result})},visible:!1,visible_password:!1,isEdit:!1,help:{},pagination:{},roleOption:[],loading:!1}},created:function(){this.handleRoleSearch()},methods:{handleRoleSearch:function(){var e=this;Object(s["d"])().then(function(t){var a=t.result;e.roleOption=a})},handleRoleChange:function(e){this.mdl.role_id=e||null},handleEdit:function(e){this.mdl=Object.assign({},e),this.visible=!0,this.isEdit=!0},handleCreate:function(){this.mdl={id:void 0,username:"",password:"",balance:0,price_level:5,role_id:null,is_active:!0},this.visible=!0,this.isEdit=!1},handleChangePassword:function(e){this.mdl={id:e.id,new_password:""},this.visible_password=!0},handleChangeStatus:function(e){this.mdl.is_active=e.target.checked},updateForm:function(){var e=this;this.loading=!0,Object(s["g"])(this.mdl.id,this.mdl).then(function(t){e.visible=!1}).catch(function(t){e.checkError(t)}).finally(function(){e.loading=!1})},createForm:function(){var e=this;this.loading=!0,Object(s["c"])(this.mdl).then(function(t){e.visible=!1}).catch(function(t){e.checkError(t)}).finally(function(){e.loading=!1})},changePassword:function(){var e=this;this.loading=!0,Object(s["a"])(this.mdl.id,{new_password:this.mdl.new_password}).then(function(t){e.visible_password=!1}).catch(function(t){e.checkError(t)}).finally(function(){e.loading=!1})},checkError:function(e){var t=Object(i["a"])(e,"username","password","new_password","price_level","balance","role_id","is_active","non_field_errors");for(var a in this.help={username:t["username"],password:t["password"],new_password:t["new_password"],price_level:t["price_level"],balance:t["balance"],role_id:t["role_id"],is_active:t["is_active"],non_field_errors:t["non_field_errors"]},t)t[a]&&this.$notification["error"]({message:a,description:t[a],duration:4})}}},d=o,c=a("2877"),u=Object(c["a"])(d,l,r,!1,null,null,null);t["default"]=u.exports},f3b8:function(e,t,a){"use strict";function l(e){if(e&&e.response&&e.response.data&&e.response.data.message){for(var t={},a=arguments.length,l=new Array(a>1?a-1:0),r=1;r<a;r++)l[r-1]=arguments[r];for(var n=0,s=l;n<s.length;n++){var i=s[n];t[i]=e.response.data.message[i]||null}return t}return null}a.d(t,"a",function(){return l})}}]);