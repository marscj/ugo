(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4724d4ac"],{9735:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{directives:[{name:"action",rawName:"v-action:query",arg:"query"}],attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:8,sm:16}},[a("a-form-item",{attrs:{label:"Search"}},[a("a-input",{attrs:{placeholder:"Name, Product, VariantID, SKU"},model:{value:e.queryParam.search,callback:function(t){e.$set(e.queryParam,"search",t)},expression:"queryParam.search"}})],1)],1),a("a-col",{attrs:{md:8,sm:16}},[a("a-form-item",{attrs:{label:"Status"}},[a("a-select",{model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},e._l(e.statusData,function(t){return a("a-select-option",{key:t.value},[e._v(e._s(t.label))])}),1)],1)],1)],1)],1)],1),a("div",{staticClass:"table-operator"},[a("a-button",{directives:[{name:"action",rawName:"v-action:add",arg:"add"}],attrs:{type:"primary",icon:"plus"},on:{click:e.handleCreate}},[e._v("Add")]),e.selectedRowKeys.length>0?a("a-button",{directives:[{name:"action",rawName:"v-action:edit",arg:"edit"}],attrs:{type:"default",icon:"unlock"},on:{click:function(t){return e.listVariantEnable(!0)}}},[e._v("上架")]):e._e(),e.selectedRowKeys.length>0?a("a-button",{directives:[{name:"action",rawName:"v-action:edit",arg:"edit"}],attrs:{type:"default",icon:"lock"},on:{click:function(t){return e.listVariantEnable(!1)}}},[e._v("下架")]):e._e(),e.selectedRowKeys.length>0?a("a-button",{directives:[{name:"action",rawName:"v-action:delete",arg:"delete"}],attrs:{type:"danger",icon:"delete"},on:{click:e.listVariantDelete}},[e._v("删除")]):e._e()],1),a("s-table",{ref:"table",attrs:{size:"default",rowKey:function(e){return e.id},columns:e.columns,data:e.loadData,alert:e.options.alert,rowSelection:e.options.rowSelection,bordered:""},scopedSlots:e._u([{key:"action",fn:function(t,n){return a("span",{},[[a("router-link",{directives:[{name:"action",rawName:"v-action:edit",arg:"edit"}],attrs:{to:{name:"VariantEdit",params:{id:n.id}}}},[e._v("Edit")]),a("a-divider",{directives:[{name:"action",rawName:"v-action:edit",arg:"edit"}],attrs:{type:"vertical"}})],e.$auth("Product.edit")||e.$auth("Product.delete")?a("a-dropdown",[a("a",{staticClass:"ant-dropdown-link"},[e._v("More")]),a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",[a("a",{directives:[{name:"action",rawName:"v-action:edit",arg:"edit"}],on:{click:function(t){return e.updateVariant(n,!0)}}},[e._v("上架")]),a("a",{directives:[{name:"action",rawName:"v-action:edit",arg:"edit"}],on:{click:function(t){return e.updateVariant(n,!1)}}},[e._v("下架")]),a("a",{directives:[{name:"action",rawName:"v-action:delete",arg:"delete"}],on:{click:function(t){return e.handleDelete(n)}}},[e._v("删除")])])],1)],1):e._e()],2)}}])})],1)},r=[],o=a("2af9"),c=a("d96b"),i=[{value:0,label:"全部"},{value:1,label:"美食"},{value:2,label:"门票"},{value:3,label:"日游"},{value:4,label:"用车"},{value:5,label:"酒店"},{value:6,label:"伴手礼"}],l=[{value:0,label:"全部"},{value:1,label:"上架"},{value:2,label:"下架"}],u={name:"VariantList",components:{STable:o["e"]},created:function(){var e=this;this.debouncedGetAnswer=_.debounce(function(){e.$refs.table.refresh(!0)},1e3)},watch:{"queryParam.search":function(e,t){this.debouncedGetAnswer()},status:function(e,t){this.queryParam.status=0==e?void 0:1==e,this.$refs.table.refresh(!0)},selectedRowKeys:function(e,t){this.ids=e.join(",")}},data:function(){var e=this,t=this.$createElement;return{status:0,statusData:l,categoryData:i,queryParam:{search:void 0,status:void 0},columns:[{title:"#",dataIndex:"id",width:40},{title:"Name",dataIndex:"name"},{title:"Product",dataIndex:"product"},{title:"Category",dataIndex:"category",customRender:function(e,a,n){return t("span",[i[e].label])}},{title:"VariantID",dataIndex:"variantID"},{title:"SKU",dataIndex:"sku"},{title:"Status",dataIndex:"status",width:"80px",customRender:function(e,a,n){return t("span",e?["上架"]:["下架"])}},{title:"Action",dataIndex:"action",width:"140px",scopedSlots:{customRender:"action"}}],loadData:function(t){return Object(c["h"])(Object.assign(t,e.queryParam)).then(function(e){return e.result})},selectedRowKeys:[],selectedRows:[],options:{alert:{show:!1,clear:function(){e.selectedRowKeys=[]}},rowSelection:{selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectChange}},ids:null}},methods:{handleCreate:function(e){this.$router.push({name:"VariantCreate"})},handleDelete:function(e){var t=this;t.$confirm({title:"alert",content:"Are you sure delete ".concat(e.title,"?"),okText:"delete",okType:"danger",cancelText:"cancle",onOk:function(){return t.$refs.table.localLoading=!0,Object(c["d"])(e.id).then(function(e){t.onClear(),t.$refs.table.refresh(!0)}).finally(function(){t.$refs.table.localLoading=!1})}})},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},onClear:function(){this.options.alert.clear(),this.$refs.table.clearSelected()},listVariantDelete:function(){var e=this;e.$confirm({title:"alert",content:"Are you sure delete?",okText:"delete",okType:"danger",cancelText:"cancle",onOk:function(){e.$refs.table.localLoading=!0,Object(c["k"])({ids:e.ids}).then(function(t){return e.onClear(),e.$refs.table.refresh(!0)}).finally(function(){e.$refs.table.localLoading=!1})}})},listVariantEnable:function(e){var t=this;this.$refs.table.localLoading=!0,Object(c["l"])({ids:this.ids,enable:e?1:0}).then(function(e){return t.onClear(),t.$refs.table.refresh(!0)}).finally(function(){t.$refs.table.localLoading=!1})},updateVariant:function(e,t){var a=this,n=Object.assign({},e,{status:t,adult_status:t});this.$refs.table.localLoading=!0,Object(c["n"])(e.id,n).then(function(e){return a.onClear(),a.$refs.table.refresh(!0)}).finally(function(){a.$refs.table.localLoading=!1})}}},d=u,s=a("2877"),f=Object(s["a"])(d,n,r,!1,null,null,null);t["default"]=f.exports},d96b:function(e,t,a){"use strict";a.d(t,"f",function(){return o}),a.d(t,"e",function(){return c}),a.d(t,"m",function(){return i}),a.d(t,"a",function(){return l}),a.d(t,"c",function(){return u}),a.d(t,"i",function(){return d}),a.d(t,"j",function(){return s}),a.d(t,"h",function(){return f}),a.d(t,"g",function(){return b}),a.d(t,"n",function(){return m}),a.d(t,"b",function(){return h}),a.d(t,"d",function(){return v}),a.d(t,"k",function(){return p}),a.d(t,"l",function(){return w});var n=a("365c"),r=a("b775");function o(e){return Object(r["b"])({url:n["a"].product+"?backend=0",method:"get",params:e})}function c(e){return Object(r["b"])({url:n["a"].product+"".concat(e,"/")+"?backend=0",method:"get"})}function i(e,t){return Object(r["b"])({url:n["a"].product+"".concat(e,"/")+"?backend=0",method:"put",data:t})}function l(e){return Object(r["b"])({url:n["a"].product+"?backend=0",method:"post",data:e})}function u(e){return Object(r["b"])({url:n["a"].product+"".concat(e,"/")+"?backend=0",method:"delete"})}function d(e){return Object(r["b"])({url:n["a"].product+"delete/",method:"delete",params:e})}function s(e){return Object(r["b"])({url:n["a"].product+"enable/",method:"post",params:e})}function f(e){return Object(r["b"])({url:n["a"].variant+"?backend=0",method:"get",params:e})}function b(e){return Object(r["b"])({url:n["a"].variant+"".concat(e,"/")+"?backend=0",method:"get"})}function m(e,t){return Object(r["b"])({url:n["a"].variant+"".concat(e,"/")+"?backend=0",method:"put",data:t})}function h(e){return Object(r["b"])({url:n["a"].variant+"?backend=0",method:"post",data:e})}function v(e){return Object(r["b"])({url:n["a"].variant+"".concat(e,"/")+"?backend=0",method:"delete"})}function p(e){return Object(r["b"])({url:n["a"].variant+"delete/",method:"delete",params:e})}function w(e){return Object(r["b"])({url:n["a"].variant+"enable/",method:"post",params:e})}}}]);