(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4aaecf0c"],{"0fea":function(t,e,n){"use strict";n.d(e,"e",function(){return r}),n.d(e,"g",function(){return s}),n.d(e,"c",function(){return o}),n.d(e,"a",function(){return c}),n.d(e,"d",function(){return l}),n.d(e,"b",function(){return u}),n.d(e,"f",function(){return d});var a=n("365c"),i=n("b775");function r(t){return Object(i["b"])({url:a["a"].user,method:"get",params:t})}function s(t,e){return Object(i["b"])({url:a["a"].user+"".concat(t,"/"),method:"put",data:e})}function o(t){return Object(i["b"])({url:a["a"].user,method:"post",data:t})}function c(t,e){return Object(i["b"])({url:a["a"].user+"".concat(t,"/")+"admin_change_password/",method:"post",data:e})}function l(t){return Object(i["b"])({url:a["a"].role,method:"get",params:t})}function u(t){return Object(i["b"])({url:a["a"].role,method:"post",data:t})}function d(t,e){return Object(i["b"])({url:a["a"].role+"".concat(t,"/"),method:"put",data:e})}},f3b8:function(t,e,n){"use strict";function a(t){if(t&&t.response&&t.response.data&&t.response.data.message){for(var e={},n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];for(var r=0,s=a;r<s.length;r++){var o=s[r];e[o]=t.response.data.message[o]||null}return e}return null}n.d(e,"a",function(){return a})},fa8b:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-spin",{directives:[{name:"action",rawName:"v-action:query",arg:"query"}],attrs:{spinning:t.spinning}},[n("a-card",{directives:[{name:"action",rawName:"v-action:query",arg:"query"}],style:{height:"100%"},attrs:{bordered:!1}},[n("a-row",{attrs:{gutter:24}},[n("a-col",{attrs:{md:4}},[n("a-list",{attrs:{itemLayout:"vertical",dataSource:t.roles},scopedSlots:t._u([{key:"renderItem",fn:function(e,a){return n("a-list-item",{key:a},[n("a-list-item-meta",{style:{marginBottom:"0"}},[n("span",{staticStyle:{"text-align":"center",display:"block"},attrs:{slot:"description"},slot:"description"},[t._v(t._s(e.describe))]),n("a",{staticStyle:{"text-align":"center",display:"block"},attrs:{slot:"title"},on:{click:function(n){return t.edit(e)}},slot:"title"},[t._v(t._s(e.name))])])],1)}}])})],1),n("a-col",{attrs:{md:20}},[n("div",{staticStyle:{"max-width":"800px"}},[n("div",[n("h3",[t._v("Role："+t._s(t.form.name))])]),n("a-form",{attrs:{form:t.form}},[n("a-form-item",{attrs:{label:"Name:",required:"","validate-status":null==t.help.name||""===t.help.name?null:"error",help:t.help.name}},[n("a-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),n("a-form-item",{attrs:{label:"Status",required:"","validate-status":null==t.help.status||""===t.help.status?null:"error",help:t.help.status}},[n("a-select",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[n("a-select-option",{attrs:{value:0}},[t._v("Enable")]),n("a-select-option",{attrs:{value:1}},[t._v("Disable")])],1)],1),n("a-form-item",{attrs:{label:"Describe","validate-status":null==t.help.describe||""===t.help.describe?null:"error",help:t.help.describe}},[n("a-textarea",{model:{value:t.form.describe,callback:function(e){t.$set(t.form,"describe",e)},expression:"form.describe"}})],1),t.isEdit?n("a-form-item",{attrs:{label:"Permissions"}},t._l(t.form.permissions,function(e,a){return n("a-row",{key:a,attrs:{gutter:16}},[n("a-col",{attrs:{xl:4,lg:24}},[t._v(t._s(e.permissionName)+"：")]),n("a-col",{attrs:{xl:20,lg:24}},[n("a-checkbox-group",{attrs:{options:e.actionEntitySet.map(function(t){return t.label}),value:e.actionEntitySet.map(function(t){if(t.enable)return t.label})},on:{change:function(t){e.actionEntitySet.forEach(function(e){t.includes(e.label)?e.enable=!0:e.enable=!1})}}})],1)],1)}),1):t._e(),n("div",{directives:[{name:"action",rawName:"v-action:edit",arg:"edit"}],staticStyle:{position:"relative","margin-top":"20px"}},[t.isEdit?n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"},on:{click:t.handleSubmit}},[t._v("Submit")]):t._e()],1),n("div",{directives:[{name:"action",rawName:"v-action:add",arg:"add"}],staticStyle:{position:"relative","margin-top":"20px"}},[t.isEdit?t._e():n("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary","html-type":"submit"},on:{click:t.handleSubmit}},[t._v("Create")])],1)],1)],1)])],1)],1)],1)},i=[],r=(n("7f7f"),n("f3b8")),s=n("0fea"),o=n("ac0d"),c={name:"RoleList",mixins:[o["c"]],components:{},data:function(){return{isEdit:!1,spinning:!1,form:{},roles:[],help:{}}},created:function(){this.fetch()},methods:{edit:function(t){this.form=Object.assign({},t),void 0!=this.form.id?this.isEdit=!0:this.isEdit=!1},fetch:function(){var t=this;this.spinning=!0,Object(s["d"])().then(function(e){var n=e.result;t.roles=n,t.roles.push({id:void 0,name:"Add Role",describe:"Add a role",status:0,permissions:[]}),t.edit(t.roles[0])}).finally(function(){t.spinning=!1})},checkError:function(t){var e=Object(r["a"])(t,"name","status","describe");for(var n in this.help={name:e["name"],status:e["status"],describe:e["describe"]},e)e[n]&&this.$notification["error"]({message:n,description:e[n],duration:4})},handleSubmit:function(){var t=this;this.spinning=!0,this.isEdit?Object(s["f"])(this.form.id,this.form).then(function(e){t.$notification.success({message:"修改成功"})}).catch(function(e){t.checkError(e)}).finally(function(){t.spinning=!1}):Object(s["b"])(this.form).then(function(e){t.$notification.success({message:"创建成功"}),t.form=e.result,t.roles.unshift(t.form),t.isEdit=!0}).catch(function(e){t.checkError(e)}).finally(function(){t.spinning=!1})}}},l=c,u=n("2877"),d=Object(u["a"])(l,a,i,!1,null,"e8e49b04",null);e["default"]=d.exports}}]);